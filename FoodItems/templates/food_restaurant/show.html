<!DOCTYPE html>


{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
 -->
  <link rel="stylesheet" href="animate.css">

  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
   --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  
  <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script> -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/yourcode.js"></script>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
        
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
        <script>

          function toggleDiv(id) {
              var div = document.getElementById(id);
              div.style.display = div.style.display == "none" ? "inline-block" : "none";
          }

        </script>
</head>
<style>

        .card-img-top {
          width: 100%;
          height: 8vw;
          object-fit: cover;
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);

        }

        .btn, .btn:hover{
          background-color:#FF9900;
          border: 0px #FF9900;
          color:#ffffff;
          font-size: 1.5rem;
        }

        .card{
          background-color: #232F3E;
          color:#ffffff;
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
          font-size:1.5rem;
        }

        .modal-open .modal {
            overflow-x: hidden;
            overflow-y: hidden;
        }

        .pagination{
          text-align: center;
          margin-top: 1em;
          font-size: 1.3rem;
        }

        .page-action{
          margin: 0 0.1em;
          display:inline-block;
          padding: 0.5em;
          color: #FF9900;
          font-size:2rem;
        }

        .pagination-number{
          background-color: #FF9900;
          padding : 0.5em 0.9em;
          color:#ffffff;
          margin:0.2em;
          border-radius: 2px;
        }

        .pagination-number:hover , .pagination-current{
          background-color:#FF9900 ;
          box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
          font-size: 1.5rem;
        }

        .food{
          position:absolute;
          top:2%;
          left:35%;
          width:100%;
          font-size: 1.5rem;
        }

        .food .modal-title
        {
          font-size: 3rem;
        }
                
        .food .modal-dialog{
          position: relative;
          margin: 0 auto;
          top: 20%;
          left:0%;
        }
        .scroll{
          overflow-y:auto; max-height: 100px;
        }

        input
        {
          width:auto;
          max-width:40%;

        }


.navbar-inverse
  {
    background-color: #232F3E;
    border-color: #232F3E;
    font-family: 'Poppins';
  }

  .navbar-inverse .navbar-brand
  {
    color: #fff;
    font-size: 40px;
    padding: 40px 15px;
    font-weight: 900;
  }

  .nav.navbar-nav.navbar-right
  {
    margin: 5px 0px;
    font-weight: bold;
    display: inline-block;
  }

  .nav.navbar-nav.navbar-left
  {
    margin: 5px 0;
    font-weight: bold;
    display: inline-block;
  }

  .navbar-inverse .navbar-nav > li
  {
    display: inline-block;
    padding-right: 20px;
  }

  .navbar-inverse .navbar-nav > li > a
  {
    color: #fff;
    display: inline-block;
    font-size: 15px;
  }

  .navbar-inverse .navbar-nav > li > a:hover {
       background-color: #FFFFFF40;
  }

  @media (min-width: 768px){
  .row-cols-md-5>* {
    -ms-flex: 0 0 20%;
    flex: 0 0 20%;
    max-width: 25%;
}
  }

	@media only screen and (min-width: 768px) and (max-width: 991px)
	{

	}

	@media only screen and (max-width: 767px)
	{
		.navbar-inverse .navbar-brand{
			font-size: 30px;
			padding:20px 15px;
		}
		.navbar-collapse
		{
			background: transparent;
		}
		.indicate
		{
			list-style-type: square;
		}
        .navbar-inverse .navbar-nav > li > a:hover {
       background-color: #FFFFFF40;
  }

	}


  </style>

<body style="background-color: #E8E8E8">
  <div class="container-fluid" style="padding-left: 0rem; padding-right: 0rem;">
<nav class="navbar navbar-inverse">

  <div class="container">

    <a class="nav navbar-nav navbar-left" style="font-size: 27px; color: #FF9900;float: left;"><span><img src="/media/amazon-icon-1.webp" height="32px" width="32px"; /></span> AmazEats </a>

    <div class="navbar-header" style="float: left;">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navCollapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

  <div class="collapse navbar-collapse" id="navCollapse" >
   <ul class="nav navbar-nav navbar-left" style="display: inline-block;">
    <li ><a href="/dashboard" >Home</a></li>
    <li ><a href="/food/res_pending_order/" >Profile</a></li>
    <li ><a href="/fooditems/add_fooditem">Add FoodItems</a></li>
    <li ><a href="/logout/">LogOut</a></li>

    <li>
    <form class="form-inline" action='/fooditems/restaurant_search' method = 'get' style="margin-top: 12px;">
      <input style="height:30px;font-size: 15px;" class="form-control mr-sm-2" type="search" name='q'  placeholder="Search" aria-label="Search">
      <button size="10px"class="btn btn-info" type="submit"><i class="fa fa-search"></i></button>
    </form>
  </li>
  </ul>
   </div>
  </div>
</nav>

<div id="myfilter"class="container-fluid " style="width:78.8%;margin-bottom: 2rem;">
  <a id = "filters" class="btn btn-lg " href="#" onclick="toggleDiv('filter')">Filters</a>
  <div id="filter" style="display: none;">
    <form method="post">
      {% csrf_token %}

      <!-- {{ pFilter.form }} -->
      <div class="text-justify" style="display:inline-block; font-size: medium; padding-left:10rem; ">

      {% for field in pFilter.form%}
      <label style="padding-right: 1rem;padding-left: 2rem;">  {{field.html_name}}: </label>{{field}}
      {% endfor %}
    </div>
      <button class = "btn btn-lg" type="submit" style="margin-bottom: 1rem;">search</button>
    </form>
  </div>
</div>

<div class="container-fluid border" style="background-color:#ffffff;width:78.8%;margin-bottom: 20px; min-height: 70%;">
  <br/>
<h1 class="text-center " style="font-size: 40px;">catalogue</h1>

<hr/>
  <div class="row row-cols-1 row-cols-md-5" style="padding-left: 1rem;padding-top: 2rem; max-width:100%;" >
    {% for f in food %}
    <div class="col mb-5" style="padding-right: 1rem;" >
      <div class="card" id="{{f.food_id}}">
        <a class="card-block text-decoration-none" data-toggle="modal" href="#exampleModalScrollable{{f.food_id}}">
          <img class="card-img-top" src="{{ f.image.url }}" alt="Card image cap">
          <div class="card-body text-white">
            <h5 class="card-title" style="color:#ffffff;font-size:2.5rem;">{{ f.food_name }}</h5>
            <p style="float:left;">{{ f.veg }}</p>
            <p style="float:right;font-size: 20px;"><b>&#x20B9;{{f.price}}</b></p>                        
          </div>
        </a>

        <div class="card-footer text-center">
          {% if f.serviceable == "available" %}
          <button id = "{{ f.food_id }}" class="btn" onclick="change(event);" class="trigger-btn">out-of-service</button>
          {% elif f.serviceable == "not available" %}
          <button id = "{{ f.food_id }}" class="btn" onclick="change(event);" class="trigger-btn">in-service</button>
          {% endif %}
        </div>
      </div>
    </div>

    <script>
      function change(event)
      {
        var me = event.currentTarget
       var food_id = me.getAttribute("id");
       if (me.textContent=="in-service") me.textContent = "out-of-service";
        else me.textContent = "in-service";
       jQuery.get("/fooditems/update_acceptable/"+food_id+"/",function(data, status){
         alert("success");
       });
      }
    </script>

    <!-- Modal -->
 <div class="modal fade food" id="exampleModalScrollable{{f.food_id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" aria-hidden="true" >
  <div class="modal-dialog modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalScrollableTitle">{{f.food_name}}</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="font-size: 1.8rem;">
        <p style="float:left;">{{f.veg}}</p><p style="float:right;font-size: 40px;">&#8377;{{f.price}}</p><br/><br/>
        <p>{{f.item_type}}</p>
        <p>{{f.cuisine_type}}</p>
        <p>rating : {{f.avg_rating}}</p>
        <hr/> 
        <h5 style="font-size: 2rem;">Reviews</h5><br/>
        <div class="scroll">
        <p style="font-size: 1.8rem;">
          {% for r in f.rating_set.all %}
            {{ r.user_id }} : {{ r.reviews }}<br/>
          {% endfor %}

        </p>
      </div>
      </div>
      <div class="modal-footer">
        <a role="button"  style="color: #ffffff;" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal{{ f.food_id }}">update price</a>
        <a role="button" href="#" class="btn btn-primary">update acceptable</a>
        <a role="button" style="color: #ffffff;" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">Delete</a>
      </div>
    </div>
  </div>
</div>


<div class="modal fade food" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <h6 class="modal-title" id="exampleModalLabel">delete</h6> -->
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h3>Are sure to delete the fooditem</h3>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" data-dismiss="modal">Cancel</button>
        <a type="button" href="/fooditems/delete_fooditem/{{ f.food_id }}" class="btn" >Delete</a>
      </div>
    </div>
  </div>
</div>


<div class="modal fade food" id="exampleModal{{ f.food_id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <p class="modal-title" id="exampleModalLabel" style="font-size: 1.5 rem;">update Price</p>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form >
          <div class="row" style=" margin-bottom: 3px;" >
            <div class="col-5 text-center">
              <label>Price</label>
            </div>
            <div class="col-7">
              <input type="text" name="p" class="form-control form-control-lg" placeholder="New price" style="max-width: 100%;">
            </div>
          </div>
        
        <a type="button" href="/fooditems/update_price/{{ f.food_id }}" class="btn" style="float: right;">Update</a>

          <!-- <button type="submit" class="btn btn-primary">submit</button> -->
        </form>
      </div>
    </div>
  </div>
</div>

{% empty %}

  <div class="center-block" style="margin-left:40% ; margin-top: 5%;margin-bottom: 10%; margin-right: 30%; text-align:center;">
    <img src="https://cdn0.iconfinder.com/data/icons/30-hardware-line-icons/64/Search-512.png" height=170rem width=170rem/>
    <h2 class="text-center">No Results Found </h2>
  </div>
  {% endfor %}

  </div>
  {% if food %}
  <div class="pagination justify-content-center">

    {% if food.has_previous %}
      <a class="page-action" href="?page=1"><i class="fa fa-angle-double-left"></i></a>
      <a class="page-action" href="?page={{ food.previous_page_number }}"><i class="fa fa-angle-left"></i></a>
    {% endif %}

    {% for n in food.paginator.page_range %}
      {% if food.number == n %}
        <span class="pagination-number pagination-current">{{ n }}</span>
        {% elif n > food.number|add:'-2' and n < food.number|add:'2' %}
          <a class="pagination-number" href="?page={{ n }}">{{ n }}</a>
        {% endif %}
    {% endfor %}

    {% if food.has_next %}
      <a class="page-action" href="?page={{ food.next_page_number }}"><i class="fa fa-angle-right"></i></a>
      <a class="page-action" href="?page={{ food.paginator.num_pages }}"><i class="fa fa-angle-double-right"></i></a>
    {% endif %}
    
  </div>
  {% endif %}

</div>

<div class="container-fluid border" style=" background-color:#232F3E;color:#ffffff;margin-top:5.5rem;height:10rem;width:100%;">  
  <p class="text-center" style="font-size: 2rem;padding-top: 3rem;">AmazEats</p>
</div>
</div>

</body>
</html>

{% endblock %}

